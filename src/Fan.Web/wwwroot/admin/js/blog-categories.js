Vue.component('blog-categories',{mixins:[categoriesMixin],data:()=>({dialogVisible:!1,title:'',description:'',upsertText:'Add',catEditing:null,errMsg:''}),computed:{disableUpsertButton(){return 0>=this.title.trim().length},addButtonVisible(){return'Add'===this.upsertText},payload(){return{title:this.title,description:this.description}}},methods:{closeDialog(){this.dialogVisible=!1,this.title='',this.description='',this.errMsg=''},addCat(){this.dialogVisible=!0,this.title='',this.description='',this.upsertText='Add'},editCat(a){this.dialogVisible=!0,this.catEditing=a,this.upsertText='Edit',this.title=a.title,this.description=a.description},deleteCat(a){confirm(`Are you sure you want to permanently delete '${a.title}'?`)&&axios.delete(`/admin/categories?id=${a.id}`,this.$root.headers).then(()=>{let b=this.categories.findIndex(b=>b.id===a.id),c=this.categories.find(a=>a.id===this.defaultCategoryId);c.count+=a.count,this.categories.splice(b,1),this.$root.toast('Category deleted.')}).catch(()=>{this.$root.toastError('Delete category failed.')})},setDefault(a){axios.post(`/admin/categories?handler=default&id=${a}`,null,this.$root.headers).then(()=>{this.defaultCategoryId=a}).catch(()=>{this.$root.toast('Set default category failed.','red')})},viewPosts(a){window.location.href=a},insertCat(){axios.post('/admin/categories',this.payload,this.$root.headers).then(a=>{this.closeDialog(),this.categories.push(a.data),this.sortCategories(),this.$root.toast('New category added.')}).catch(a=>{this.errMsg=a.response.data[0].errorMessage,this.$root.toast('Add category failed.','red')})},updateCat(){this.payload.id=this.catEditing.id,this.payload.count=this.catEditing.count,axios.post('/admin/categories?handler=update',this.payload,this.$root.headers).then(a=>{this.closeDialog();let b=this.categories.findIndex(b=>b.id===a.data.id);this.categories[b]=a.data,this.sortCategories(),this.$root.toast('Category updated.')}).catch(a=>{this.errMsg=a.response.data[0].errorMessage,this.$root.toast('Update category failed.','red')})},sortCategories(){this.categories.sort((c,a)=>{var b=c.title.toUpperCase(),d=a.title.toUpperCase();return b<d?-1:b>d?1:0})}}});
//# sourceMappingURL=blog-categories.js.map